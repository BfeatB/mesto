(()=>{"use strict";var e={56:(e,t,s)=>{e.exports=s.p+"a1c9ca396b2dc829108e.jpg"},62:(e,t,s)=>{e.exports=s.p+"523372704cbda68f44ae.jpg"},680:(e,t,s)=>{e.exports=s.p+"af24874e5bb9162b0e99.jpg"},301:(e,t,s)=>{e.exports=s.p+"20cb6803f0beadaa261d.jpg"},172:(e,t,s)=>{e.exports=s.p+"48f44e3e1c3120e3535f.jpg"},352:(e,t,s)=>{e.exports=s.p+"a0f41d1df0e016a56cd0.jpg"}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,s),o.exports}s.p="",(()=>{class e{constructor(e,t,s){this.card=e,this.templateSelector=s,this.handleCardClick=t}_setEventListeners(){this.element.querySelector(".card__img").addEventListener("click",this.handleCardClick),this.element.querySelector(".card__like-button").addEventListener("click",this._onLikeButtonClick),this.element.querySelector(".card__delete-button").addEventListener("click",this._onDeleteButtonClick)}_onLikeButtonClick(e){e.target.classList.toggle("card__like-button_active")}_onDeleteButtonClick(e){e.target.closest(".card").remove()}_getTemplate(){return document.querySelector(this.templateSelector).content.firstElementChild.cloneNode(!0)}generateCard(){this.element=this._getTemplate();const e=this.element.querySelector(".card__img");return e.setAttribute("src",this.card.link),e.setAttribute("alt",this.card.alt),this.element.querySelector(".card__capture").textContent=this.card.name,this._setEventListeners(),this.element}}const t=[{name:"Санкт-Петербург",link:s(56),alt:"Кот в Петербурге"},{name:"Москва",link:s(301),alt:"Кот в Москве"},{name:"Тверь",link:s(352),alt:"Кот в Твери"},{name:"Яндекс",link:s(172),alt:"Кот в Яндексе"},{name:"Кудыкина гора",link:s(680),alt:"Кот на Кудыкиной горе"},{name:"Тула и памятник тульскому прянику",link:s(62),alt:"Кот в Туле"}];class r{constructor(e){this.selector=e,this.popupEl=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._onOverlayClick=this._onOverlayClick.bind(this)}open(){this.popupEl.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._onOverlayClick)}close(){this.popupEl.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._onOverlayClick)}_onOverlayClick(e){e.target.classList.contains("popup_opened")&&this.close()}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this.popupEl.querySelector(".popup__close").addEventListener("click",(()=>this.close()))}}class n extends r{constructor(e,t){super(e),this.onFormSubmit=t,this.inputs=this.popupEl.querySelectorAll(".popup__input"),this.form=this.popupEl.querySelector(".popup__form")}_getInputValues(){const e={};return this.inputs.forEach((t=>{e[t.name]=t.value})),console.log(e),e}setEventListeners(){super.setEventListeners(),this.form.addEventListener("submit",(e=>{this.onFormSubmit(this._getInputValues()),e.preventDefault()}))}close(){this.form.reset(),super.close()}}document.querySelectorAll(".popup__container"),document.querySelector(".popup__gallery");const o=document.querySelector(".profile__edit-button"),i=document.querySelector(".profile__name"),l=document.querySelector(".profile__description"),c=document.querySelector(".popup__form"),a=c.querySelector("input[name='name']"),p=c.querySelector("input[name='description']"),u=document.querySelector(".profile__add-button");function d(t){return new e(t,v,"#cardTemplate").generateCard()}const h=new class{constructor({items:e,renderer:t},s){this.items=e,this.renderer=t,this.containerEl=document.querySelector(s)}renderAll(){this.items.forEach((e=>{this.containerEl.append(this.renderer(e))}))}addItem(e){this.containerEl.prepend(e)}}({items:t,renderer:d},".cards");h.renderAll();const _=new class{constructor(e){this.selectors=e}_showInputError(e,t,s){const r=e.querySelector(`.${t.id}-error`);t.classList.add(this.selectors.inputErrorClass),r.textContent=s,r.classList.add(this.selectors.errorClass)}_hideInputError(e,t){const s=e.querySelector(`.${t.id}-error`);t.classList.remove(this.selectors.inputErrorClass),s.classList.remove(this.selectors.errorClass),s.textContent=""}_checkInputValidity(e,t){t.validity.valid?this._hideInputError(e,t):this._showInputError(e,t,t.validationMessage)}_setEventListeners(e){const t=Array.from(e.querySelectorAll(this.selectors.inputSelector)),s=e.querySelector(this.selectors.submitButtonSelector);this._toggleButtonState(t,s),t.forEach((r=>{r.addEventListener("input",(()=>{this._checkInputValidity(e,r),this._toggleButtonState(t,s)}))})),e.addEventListener("reset",(()=>{this._toggleButtonState(t,s)}))}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_toggleButtonState(e,t,s){this._hasInvalidInput(e)?this._disableButton(t,s):this._enableButton(t,s)}_disableButton(e){e.classList.add(this.selectors.inactiveButtonClass),e.setAttribute("disabled","disabled")}_enableButton(e){e.classList.remove(this.selectors.inactiveButtonClass),e.removeAttribute("disabled")}setInitialFormState(e){const t=Array.from(e.querySelectorAll(this.selectors.inputSelector)),s=e.querySelector(this.selectors.submitButtonSelector);t.forEach((t=>{this._hideInputError(e,t)})),this._disableButton(s)}enableValidation(){Array.from(document.querySelectorAll(this.selectors.formSelector)).forEach((e=>{e.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(e)}))}}({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_type_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error-message_type_active"});_.enableValidation();const m=new class extends r{constructor(e){super(e)}open({src:e,alt:t}){super.open();const s=this.popupEl.querySelector(".popup__img-gallery"),r=this.popupEl.querySelector(".popup__figcaption");s.setAttribute("src",e),s.setAttribute("alt",t),r.textContent=t}}("#popup-gallery");function v(e){const t=e.target.getAttribute("src"),s=e.target.getAttribute("alt");m.open({src:t,alt:s})}m.setEventListeners();const E=new n("#popup-profile",(function({name:e,description:t}){S.setUserInfo({name:e,description:t}),E.close()})),S=new class{constructor({nameSelector:e,descriptionSelector:t}){this.name=document.querySelector(e),this.description=document.querySelector(t)}getUserInfo(){return{name:this.name.textContent,description:this.description.textContent}}setUserInfo({name:e,description:t}){this.name.textContent=e,this.description.textContent=t}}({nameSelector:".profile__name",descriptionSelector:".profile__description"});E.setEventListeners();const y=new n("#popup-place",(function({place:e,url:t}){const s={name:e,link:t,alt:e};h.addItem(d(s)),y.close()}));y.setEventListeners(),o.addEventListener("click",(function(){E.open(),function(){a.value=i.textContent,p.value=l.textContent;const e=new Event("input");p.dispatchEvent(e),a.dispatchEvent(e)}()})),u.addEventListener("click",(function(){y.open(),_.setInitialFormState(y.popupEl)}))})()})();