(()=>{"use strict";var t={56:(t,e,s)=>{t.exports=s.p+"a1c9ca396b2dc829108e.jpg"},62:(t,e,s)=>{t.exports=s.p+"523372704cbda68f44ae.jpg"},680:(t,e,s)=>{t.exports=s.p+"af24874e5bb9162b0e99.jpg"},301:(t,e,s)=>{t.exports=s.p+"20cb6803f0beadaa261d.jpg"},172:(t,e,s)=>{t.exports=s.p+"48f44e3e1c3120e3535f.jpg"},352:(t,e,s)=>{t.exports=s.p+"a0f41d1df0e016a56cd0.jpg"}},e={};function s(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,s),i.exports}s.p="",(()=>{const t=[{name:"Санкт-Петербург",link:s(56),alt:"Кот в Петербурге"},{name:"Москва",link:s(301),alt:"Кот в Москве"},{name:"Тверь",link:s(352),alt:"Кот в Твери"},{name:"Яндекс",link:s(172),alt:"Кот в Яндексе"},{name:"Кудыкина гора",link:s(680),alt:"Кот на Кудыкиной горе"},{name:"Тула и памятник тульскому прянику",link:s(62),alt:"Кот в Туле"}],e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_type_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error-message_type_active"},n=document.querySelector(".profile__edit-button"),r=document.querySelector("form[name = 'profile']"),i=r.querySelector("input[name='name']"),o=r.querySelector("input[name='description']"),l=document.querySelector(".profile__add-button");class c{constructor(t,e,s){this._card=t,this._templateSelector=s,this._handleCardClick=e}_setEventListeners(){this.element.querySelector(".card__img").addEventListener("click",this._handleCardClick),this.element.querySelector(".card__like-button").addEventListener("click",this._onLikeButtonClick),this.element.querySelector(".card__delete-button").addEventListener("click",this._onDeleteButtonClick)}_onLikeButtonClick(t){t.target.classList.toggle("card__like-button_active")}_onDeleteButtonClick(t){t.target.closest(".card").remove()}_getTemplate(){return document.querySelector(this._templateSelector).content.firstElementChild.cloneNode(!0)}generateCard(){this.element=this._getTemplate();const t=this.element.querySelector(".card__img");return t.setAttribute("src",this._card.link),t.setAttribute("alt",this._card.alt),this.element.querySelector(".card__capture").textContent=this._card.name,this._setEventListeners(),this.element}}class a{constructor(t,e){this._form=document.querySelector(e),this._selectors=t,this._inputList=Array.from(this._form.querySelectorAll(this._selectors.inputSelector)),this._submitButton=this._form.querySelector(this._selectors.submitButtonSelector)}_showInputError(t,e){const s=this._form.querySelector(`.${t.id}-error`);t.classList.add(this._selectors.inputErrorClass),s.textContent=e,s.classList.add(this._selectors.errorClass)}_hideInputError(t){const e=this._form.querySelector(`.${t.id}-error`);t.classList.remove(this._selectors.inputErrorClass),e.classList.remove(this._selectors.errorClass),e.textContent=""}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))})),this._form.addEventListener("reset",(()=>{this._toggleButtonState()}))}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_disableButton(){this._submitButton.classList.add(this._selectors.inactiveButtonClass),this._submitButton.setAttribute("disabled","disabled")}_enableButton(){this._submitButton.classList.remove(this._selectors.inactiveButtonClass),this._submitButton.removeAttribute("disabled")}setInitialFormState(){this._inputList.forEach((t=>{this._hideInputError(t)})),this._disableButton()}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}}class u{constructor(t){this._selector=t,this._popupEl=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._onOverlayClick=this._onOverlayClick.bind(this)}open(){this._popupEl.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._onOverlayClick)}close(){this._popupEl.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._onOverlayClick)}_onOverlayClick(t){t.target.classList.contains("popup_opened")&&this.close()}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._popupEl.querySelector(".popup__close").addEventListener("click",(()=>this.close()))}}class p extends u{constructor(t,e){super(t),this._onFormSubmit=e,this._inputs=this._popupEl.querySelectorAll(".popup__input"),this._form=this._popupEl.querySelector(".popup__form")}_getInputValues(){const t={};return this._inputs.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{this._onFormSubmit(this._getInputValues()),t.preventDefault()}))}close(){super.close(),this._form.reset()}}function d(t){return new c(t,E,"#cardTemplate").generateCard()}const _=new class{constructor({items:t,renderer:e},s){this.items=t,this.renderer=e,this.containerEl=document.querySelector(s)}renderAll(){this.items.forEach((t=>{this.containerEl.append(this.renderer(t))}))}addItem(t){this.containerEl.prepend(t)}}({items:t,renderer:d},".cards");_.renderAll();const h=new a(e,"form[name = 'profile']");h.enableValidation();const m=new a(e,"form[name = 'addCard']");m.enableValidation();const v=new class extends u{constructor(t){super(t)}open({src:t,alt:e}){super.open();const s=this._popupEl.querySelector(".popup__img-gallery"),n=this._popupEl.querySelector(".popup__figcaption");s.setAttribute("src",t),s.setAttribute("alt",e),n.textContent=e}}("#popup-gallery");function E(t){const e=t.target.getAttribute("src"),s=t.target.getAttribute("alt");v.open({src:e,alt:s})}v.setEventListeners();const f=new p("#popup-profile",(function({name:t,description:e}){b.setUserInfo({name:t,description:e}),f.close()})),b=new class{constructor({nameSelector:t,descriptionSelector:e}){this.name=document.querySelector(t),this.description=document.querySelector(e)}getUserInfo(){return{name:this.name.textContent,description:this.description.textContent}}setUserInfo({name:t,description:e}){this.name.textContent=t,this.description.textContent=e}}({nameSelector:".profile__name",descriptionSelector:".profile__description"});f.setEventListeners();const S=new p("#popup-place",(function({place:t,url:e}){const s={name:t,link:e,alt:t};_.addItem(d(s)),S.close()}));S.setEventListeners(),n.addEventListener("click",(function(){f.open(),function(){const t=b.getUserInfo();i.value=t.name,o.value=t.description,h.setInitialFormState()}()})),l.addEventListener("click",(function(){S.open(),m.setInitialFormState()}))})()})();